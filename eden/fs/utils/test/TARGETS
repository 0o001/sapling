# @autodeps

cpp_unittest(
    name = "test",
    srcs = glob(["*Test.cpp"]),
    deps = [
        ":test_lib",
        "@/eden/fs/utils:utils",
        "@/folly:exception",
        "@/folly:exception_wrapper",
        "@/folly/experimental:test_util",
    ],
    external_deps = [
        "boost",
        ("googletest", None, "gmock"),
    ],
)

cpp_library(
    name = "test_lib",
    srcs = glob(
        ["*.cpp"],
        excludes = ["*Test.cpp"],
    ),
    headers = glob(["*.h"]),
    deps = [
        "@/folly:conv",
        "@/folly:exception_string",
    ],
    external_deps = [
        ("googletest", None, "gtest"),
    ],
)
