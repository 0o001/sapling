thrift_library(
  name = 'serialization',
  thrift_args = ['--strict'],
  thrift_srcs = {
    'dirstate.thrift': [],
  },
  languages = ['cpp2'],
)

cpp_library(
  name = 'hg',
  srcs = glob(['*.cpp']),
  headers = glob(['*.h']),
  deps = [
    ':serialization-cpp2',
    '//eden/fs/inodes:inodes',
    '//eden/fs/model:model',
    '//eden/fs/service:EdenMountHandler',
    '//eden/fs/store:store',
    '//eden/utils:utils',
    '//folly:folly',
  ],
)
