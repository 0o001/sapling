cpp_library(
    name = "utils",
    srcs = glob(['*.cpp'], excludes=['**/*Test.cpp']),
    headers = glob(['*.h']),
    deps = [
        "@/folly:evicting_cache_map",
        "@/folly:folly",
        "@/folly/futures:futures",
        "@/folly:subprocess",
    ],
)

cpp_unittest(
    name = "test_utils",
    headers = AutoHeaders.RECURSIVE_GLOB,  # https://fburl.com/424819295
    srcs = glob(['**/*Test.cpp']),
    deps = [
        ':utils',
        '//folly/experimental:test_util',
    ],
)
